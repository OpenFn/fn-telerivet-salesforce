<?xml version="1.0"?>
<h:html xmlns="http://www.w3.org/2002/xforms" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:h="http://www.w3.org/1999/xhtml" xmlns:jr="http://openrosa.org/javarosa" xmlns:orx="http://openrosa.org/xforms" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <h:head>
    <h:title>Daily Meeting Attendance</h:title>
    <model>
      <instance>
        <daily_meeting_attendance id="daily_meeting_attendance">
          <leader/>
          <attendee jr:template="">
            <attendee_id/>
            <late/>
          </attendee>
          <metadata_note/>
          <start/>
          <start_test_output/>
          <end/>
          <end_test_output/>
          <today/>
          <today_test_output/>
          <meta>
            <instanceID/>
          </meta>
        </daily_meeting_attendance>
      </instance>
      <bind nodeset="/daily_meeting_attendance/leader" required="true()" type="barcode"/>
      <bind nodeset="/daily_meeting_attendance/attendee/attendee_id" required="true()" type="barcode"/>
      <bind nodeset="/daily_meeting_attendance/attendee/late" type="select1"/>
      <bind nodeset="/daily_meeting_attendance/metadata_note" readonly="true()" type="string"/>
      <bind jr:preload="timestamp" jr:preloadParams="start" nodeset="/daily_meeting_attendance/start" type="dateTime"/>
      <bind nodeset="/daily_meeting_attendance/start_test_output" readonly="true()" type="string"/>
      <bind jr:preload="timestamp" jr:preloadParams="end" nodeset="/daily_meeting_attendance/end" type="dateTime"/>
      <bind nodeset="/daily_meeting_attendance/end_test_output" readonly="true()" type="string"/>
      <bind jr:preload="date" jr:preloadParams="today" nodeset="/daily_meeting_attendance/today" type="date"/>
      <bind nodeset="/daily_meeting_attendance/today_test_output" readonly="true()" type="string"/>
      <bind calculate="concat('uuid:', uuid())" nodeset="/daily_meeting_attendance/meta/instanceID" readonly="true()" type="string"/>
    </model>
  </h:head>
  <h:body>
    <input ref="/daily_meeting_attendance/leader">
      <label>Leader</label>
      <hint>Scan the barcode of the person leading this event.</hint>
    </input>
    <group ref="/daily_meeting_attendance/attendee">
      <label>Sales Agent</label>
      <repeat appearance="field-list" nodeset="/daily_meeting_attendance/attendee">
        <input ref="/daily_meeting_attendance/attendee/attendee_id">
          <label>Sales Agent ID</label>
          <hint>Scan the Sales Agent's barcode.</hint>
        </input>
        <select1 ref="/daily_meeting_attendance/attendee/late">
          <label>Was the Sales Agent late?</label>
          <item>
            <label>Yes</label>
            <value>yes</value>
          </item>
          <item>
            <label>No</label>
            <value>no</value>
          </item>
        </select1>
      </repeat>
    </group>
    <input ref="/daily_meeting_attendance/metadata_note">
      <label>The following prompts show some of the metadata that you can gather during a survey.</label>
    </input>
    <input ref="/daily_meeting_attendance/start_test_output">
      <label>Survey start time: <output value=" /daily_meeting_attendance/start "/></label></input>
    <input ref="/daily_meeting_attendance/end_test_output">
      <label>Survey end time: <output value=" /daily_meeting_attendance/end "/></label></input>
    <input ref="/daily_meeting_attendance/today_test_output">
      <label>Today: <output value=" /daily_meeting_attendance/today "/></label></input>
  </h:body>
</h:html>
